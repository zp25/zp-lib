function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(t)}function t(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function e(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function n(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}function o(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function i(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),e.push.apply(e,n)}return e}function u(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?i(e,!0).forEach(function(t){o(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):i(e).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})}return r}function a(r,t){if(null==r)return{};var e,n,o=function(r,t){if(null==r)return{};var e,n,o={},i=Object.keys(r);for(n=0;n<i.length;n++)e=i[n],t.indexOf(e)>=0||(o[e]=r[e]);return o}(r,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(n=0;n<i.length;n++)e=i[n],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(r,e)&&(o[e]=r[e])}return o}function c(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var e=[],n=!0,o=!1,i=void 0;try{for(var u,a=r[Symbol.iterator]();!(n=(u=a.next()).done)&&(e.push(u.value),!t||e.length!==t);n=!0);}catch(r){o=!0,i=r}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return e}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(r){return function(r){if(Array.isArray(r)){for(var t=0,e=new Array(r.length);t<r.length;t++)e[t]=r[t];return e}}(r)||function(r){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r))return Array.from(r)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var f="application/json";function l(r,t){this.code=r,this.name="ResponseNotOkError",this.message=t||"Response not Ok"}function y(r){this.name="ResponseNotJSONError",this.message=r||"Response not JSON Error"}l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,y.prototype=Object.create(Error.prototype),y.prototype.constructor=y;var p=function(r){var t=r.ok,e=r.status,n=r.statusText;if(t)return r;var o=new l(e,n);return Promise.reject(o)},d=function(r){var t=r.headers.get("content-type");if(new RegExp(f,"i").test(t))return r.json();var e=new y;return Promise.reject(e)},v=function(r,t){return fetch(r,t).then(p).then(d)},h=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.headers,e=void 0===t?{}:t,n=r.body,o=new Headers(e);return o.set("accept",f),void 0===n?{headers:o}:n instanceof FormData?{headers:o,body:n}:(o.set("content-type",f),{headers:o,body:JSON.stringify(n)})},b={post:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=t.headers,n=t.body,o=void 0===n?"":n,i=t.mode,c=void 0===i?"no-cors":i,s=a(t,["headers","body","mode"]);return v(r,u({},s,{method:"POST"},h({headers:e,body:o}),{mode:c}))},get:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=t.headers,n=t.mode,o=void 0===n?"no-cors":n,i=a(t,["headers","mode"]);return v(r,u({},i,{method:"GET"},h({headers:e}),{mode:o}))},put:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=t.headers,n=t.body,o=void 0===n?"":n,i=t.mode,c=void 0===i?"no-cors":i,s=a(t,["headers","body","mode"]);return v(r,u({},s,{method:"PUT"},h({headers:e,body:o}),{mode:c}))},delete:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=t.headers,n=t.mode,o=void 0===n?"no-cors":n,i=a(t,["headers","mode"]);return v(r,u({},i,{method:"DELETE"},h({headers:e}),{mode:o}))}},m=function(r){return window.btoa(encodeURIComponent(r).replace(/%([0-9A-F]{2})/g,function(r,t){return String.fromCharCode("0x".concat(t))}))},g=function(r){return decodeURIComponent(Array.from(window.atob(r)).map(function(r){return"%".concat("00".concat(r.charCodeAt(0).toString(16)).slice(-2))}).join(""))},O=function(r){new Map(Object.entries(r)).forEach(function(r,t){document.addEventListener(t,r,!1)})},w=function(r,t,e){var n="function"==typeof t?t:function(r){return r},o="function"==typeof e,i=r.toString(),u=function(){var t=n.apply(void 0,arguments),i={type:r};return t instanceof Error&&(i.error=!0),void 0!==t&&(i.payload=t),o&&(i.meta=e.apply(void 0,arguments)),i};return u.toString=function(){return i},u},j=function(r,t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,n=arguments.length>1?arguments[1]:void 0,o=n.type;return{}.hasOwnProperty.call(t,o)?t[o](e,n):e}},E=function(r){return function(t){var e=t.target.dataset.trigger;e&&{}.hasOwnProperty.call(r,e)&&r[e](t)}},S=function(r){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return r.replace(/[&<>"']/g,function(r){return t[r]})},P=function(r){return function(t){return function(e){var n=r[t];return!(!n||!{}.hasOwnProperty.call(n,e))&&n[e]}}},A=function(r){if("function"==typeof URLSearchParams){var t=new URLSearchParams(r);return Object.fromEntries(s(t).map(function(r){var t=c(r,2);return[t[0],t[1]||!0]}))}for(var e=/([^?&=]+)=?([^&]*)/g,n={},i="";i=e.exec(r);)n=u({},n,o({},i[1],!i[2]||decodeURIComponent(i[2])));return n},k=function(r,t){var e=r.getItem(t);try{return JSON.parse(e)}catch(r){return e}},_=function(r,t,e){return r.setItem(t,JSON.stringify(e))};function T(r){this.name="StorageTypeError",this.message=r||"Storage Type Error"}T.prototype=Object.create(Error.prototype),T.prototype.constructor=T;var x=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.engine,i=void 0===n?localStorage:n,a=e.forceUpdate,s=void 0===a||a,f=function(e){var n=k(i,t);if(null!==n&&"object"===r(n))return n[e]},l=function(e,n){var a=k(i,t);if(null===a)return _(i,t,o({},e,n));if("object"!==r(a)){if(!s)throw new T;return _(i,t,o({},e,n))}return _(i,t,u({},a,o({},e,n)))},y=function(e){var n=k(i,t);if(null===n)return _(i,t,{});if("object"!==r(n)){if(!s)throw new T;return _(i,t,{})}var a=Object.entries(n).reduce(function(r,t){var n=c(t,2),i=n[0],a=n[1];return i===e?r:u({},r,o({},i,a))},{});return _(i,t,a)},p=function(){var e=k(i,t);return null===e||"object"!==r(e)?[]:Object.keys(e)};return{get:f,set:l,delete:y,keys:p}};function I(r){this.name="InvalidObserverError",this.message=r||"Invalid Observer Error"}I.prototype=Object.create(Error.prototype),I.prototype.constructor=I;var R=function(){function e(){t(this,e),o(this,"_observers",[]),o(this,"_state",{})}return n(e,[{key:"attach",value:function(r){var t=this;return(Array.isArray(r)?r:[r]).forEach(function(r){if(!t.constructor.isValidObserver(r))throw new I;t._observers.includes(r)||t._observers.push(r)}),this._observers.length}},{key:"detach",value:function(r){var t=Array.isArray(r)?r:[r];return this._observers=this._observers.filter(function(r){return!t.includes(r)}),this._observers.length}},{key:"setState",value:function(r){var t=this.state;this._state=u({},t,{},r),this.notify(t)}},{key:"notify",value:function(r){var t=this;this._observers.forEach(function(e){t.constructor.isValidObserver(e)&&e.update(t.state,r)})}},{key:"observers",get:function(){return this._observers}},{key:"state",get:function(){return u({},this._state)},set:function(t){if("object"!==r(t)||!t)throw new TypeError("not an Object");this._state=u({},t)}}],[{key:"isValidObserver",value:function(t){return!(!t||"object"!==r(t)||"function"!=typeof t.update)}}]),e}(),N=function(){function r(e){t(this,r),e instanceof R&&e.attach(this)}return n(r,[{key:"update",value:function(r){if(r instanceof R)return r.state}}]),r}(),U=function(t){return function(e){return"function"==typeof e?e(t[e.displayName]):"object"===r(e)?e.content(t[e.name]):void 0===t[e]?e:t[e]}},C=function(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return function(t){return(Array.isArray(t)?t:[t]).map(function(t){var n=U(t);return e.reduce(function(t,e,o){return t+n(e)+r[o+1]},r[0])}).join("")}},D=function(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return function(t){var n=Array.isArray(t)?t:[t];return Promise.all(n.map(function(t){var n=U(t);return Promise.all(e.map(n)).then(function(t){return t.reduce(function(t,e,n){return t+e+r[n+1]},r[0])})})).then(function(r){return r.join("")})}};x.proxy=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.engine,i=void 0===n?localStorage:n,a=e.forceUpdate,s=void 0===a||a;return new Proxy({},{get:function(e,n){var o=k(i,t);if(null!==o&&"object"===r(o))return o[n]},set:function(e,n,a){var c=k(i,t);if(null===c)return _(i,t,o({},n,a)),!0;if("object"!==r(c)){if(!s)throw new T;return _(i,t,o({},n,a)),!0}return _(i,t,u({},c,o({},n,a))),!0},deleteProperty:function(e,n){var a=k(i,t);if(null===a)return _(i,t,{}),!0;if("object"!==r(a)){if(!s)throw new T;return _(i,t,{}),!0}var f=Object.entries(a).reduce(function(r,t){var e=c(t,2),i=e[0],a=e[1];return i===n?r:u({},r,o({},i,a))},{});return _(i,t,f),!0},ownKeys:function(){var e=k(i,t);return null===e||"object"!==r(e)?[]:Object.keys(e)},getOwnPropertyDescriptor:function(e,n){var o=k(i,t);if(null!==o&&"object"===r(o)&&{}.hasOwnProperty.call(o,n))return{configurable:!0,enumerable:!0}},has:function(e,n){var o=k(i,t);return!(null===o||"object"!==r(o)||!{}.hasOwnProperty.call(o,n))}})};export{N as Observer,R as Subject,b as api,O as bindCustomEvent,w as createAction,j as createReducer,g as decodeBase64,E as dispatch,m as encodeBase64,S as escapeHTML,P as machine,A as searchParams,x as storage,C as templater,D as templaterAsync};
//# sourceMappingURL=index.esm.js.map
